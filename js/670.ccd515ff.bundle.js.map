{"version":3,"sources":["webpack://rgm_blog/./src/components/content/content.tsx","webpack://rgm_blog/./src/components/content/index.tsx","webpack://rgm_blog/./src/lib/highlight/languages/vue.js","webpack://rgm_blog/./src/lib/highlight/index.ts","webpack://rgm_blog/./src/pages/post-detail/post-detail-css.ts","webpack://rgm_blog/./src/pages/post-detail/post-detail.tsx","webpack://rgm_blog/./src/pages/post-detail/index.tsx","webpack://rgm_blog/./src/tools/articlesManage.ts"],"names":["state","store","dispatch","props","contentWidth","useContentWidth","contentBoxStyle","theme","common","text","bg","contentStyle","css","children","hljs","subLanguage","contains","COMMENT","relevance","begin","end","excludeBegin","excludeEnd","registerLanguage","setCurrentArticle","value","setHeaderType","headerType","console","log","window","scrollTo","top","left","useState","content","name","stat","postDetail","setPostDetail","getPostDetail","routeParams","match","params","detail","getArticleById","id","title","meta","time","birthtime","replace","tags","setTimeout","document","querySelectorAll","forEach","block","useEffect","cssParams","headerTitleColor","headerTitle","codeBg","className","dangerouslySetInnerHTML","__html","html","this","init","getInstance","instance","ArticlesManage","_posts","localStorage","getItem","articleMap","JSON","parse","deepClone","data","stringify","getArticleDate","article","Date","orderByBirthTimeDesc","articles_desc","articles","result","Object","keys","sort","aKey","bKey","getTime","map","key","getArticlesByCategory","category","filter","includes","getAllTags","tagsMap","Array","values","articleTags","length","tag","count","getArticlesByKeyword","keyword","RegExp","test"],"mappings":"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","file":"js/670.ccd515ff.bundle.js","sourcesContent":["/** @jsx jsx */\r\nimport { css, jsx } from '@emotion/react'\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Dispatch } from 'redux'\r\nimport { StoreState } from '@Types/storeState'\r\nimport useContentWidth from '@Hooks/useContentWidth'\r\n\r\ninterface IProps {\r\n  store: StoreState;\r\n  children?: React.ReactChild\r\n}\r\n\r\nfunction Content (props: IProps) {\r\n  const contentWidth = useContentWidth()\r\n\r\n  const contentBoxStyle = css`\r\n    box-sizing: border-box;\r\n    padding: 1rem 1rem 100px;\r\n    width: 100%;\r\n    color: ${props.store.theme.common.text};\r\n    background-color: ${props.store.theme.common.bg};\r\n  `\r\n\r\n  const contentStyle = css`\r\n    box-sizing: border-box;\r\n    margin: 0 auto;\r\n    width: ${contentWidth};\r\n    height: 100%;\r\n  }`\r\n\r\n  return (\r\n    <div css={contentBoxStyle}>\r\n      <div css={contentStyle}>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps (state: any) {\r\n  return {\r\n    store: state\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch: Dispatch) {\r\n  return {\r\n    \r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(Content))","import Content from './content'\r\nexport default Content","/*\r\nLanguage: Vue.js\r\nRequires: xml.js, javascript.js, typescript.js, css.js, stylus.js, scss.js\r\nAuthor: Sara Lissette Luis Ibáñez <lissette.ibnz@gmail.com>\r\nDescription: Single-File Components of Vue.js Framework\r\n*/\r\nvar module = module ? module : {};\r\n\r\nfunction vue(hljs) {\r\n  return {\r\n    subLanguage: \"xml\",\r\n    contains: [\r\n      hljs.COMMENT(\"<!--\", \"-->\", {\r\n        relevance: 10,\r\n      }),\r\n      {\r\n        begin: /^(\\s*)(<script>)/gm,\r\n        end: /^(\\s*)(<\\/script>)/gm,\r\n        subLanguage: \"javascript\",\r\n        excludeBegin: true,\r\n        excludeEnd: true,\r\n      },\r\n      {\r\n        begin: /^(?:\\s*)(?:<script\\s+lang=([\"'])ts\\1>)/gm,\r\n        end: /^(\\s*)(<\\/script>)/gm,\r\n        subLanguage: \"typescript\",\r\n        excludeBegin: true,\r\n        excludeEnd: true,\r\n      },\r\n      {\r\n        begin: /^(\\s*)(<style(\\s+scoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: \"css\",\r\n        excludeBegin: true,\r\n        excludeEnd: true,\r\n      },\r\n      {\r\n        begin: /^(?:\\s*)(?:<style(?:\\s+scoped)?\\s+lang=([\"'])(?:s[ca]ss)\\1(?:\\s+scoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: \"scss\",\r\n        excludeBegin: true,\r\n        excludeEnd: true,\r\n      },\r\n      {\r\n        begin: /^(?:\\s*)(?:<style(?:\\s+scoped)?\\s+lang=([\"'])stylus\\1(?:\\s+scoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: \"stylus\",\r\n        excludeBegin: true,\r\n        excludeEnd: true,\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nexport default vue","import vue from './languages/vue'\r\nconst hljs = require('highlight.js/lib/core')\r\n\r\nhljs.registerLanguage('xml', require('highlight.js/lib/languages/xml'))\r\n// hljs.registerLanguage('apache', require('highlight.js/lib/languages/apache'))\r\nhljs.registerLanguage('bash', require('highlight.js/lib/languages/bash'))\r\n// hljs.registerLanguage('c-like', require('highlight.js/lib/languages/c-like'))\r\n// hljs.registerLanguage('c', require('highlight.js/lib/languages/c'))\r\nhljs.registerLanguage('cpp', require('highlight.js/lib/languages/cpp'))\r\nhljs.registerLanguage('css', require('highlight.js/lib/languages/css'))\r\n// hljs.registerLanguage('dart', require('highlight.js/lib/languages/dart'))\r\nhljs.registerLanguage('markdown', require('highlight.js/lib/languages/markdown'))\r\nhljs.registerLanguage('diff', require('highlight.js/lib/languages/diff'))\r\n// hljs.registerLanguage('dockerfile', require('highlight.js/lib/languages/dockerfile'))\r\n// hljs.registerLanguage('go', require('highlight.js/lib/languages/go'))\r\nhljs.registerLanguage('htmlbars', require('highlight.js/lib/languages/htmlbars'))\r\n// hljs.registerLanguage('http', require('highlight.js/lib/languages/http'))\r\nhljs.registerLanguage('ini', require('highlight.js/lib/languages/ini'))\r\nhljs.registerLanguage('java', require('highlight.js/lib/languages/java'))\r\nhljs.registerLanguage('javascript', require('highlight.js/lib/languages/javascript'))\r\nhljs.registerLanguage('json', require('highlight.js/lib/languages/json'))\r\nhljs.registerLanguage('less', require('highlight.js/lib/languages/less'))\r\n// hljs.registerLanguage('makefile', require('highlight.js/lib/languages/makefile'))\r\nhljs.registerLanguage('nginx', require('highlight.js/lib/languages/nginx'))\r\nhljs.registerLanguage('pgsql', require('highlight.js/lib/languages/pgsql'))\r\n// hljs.registerLanguage('php', require('highlight.js/lib/languages/php'))\r\n// hljs.registerLanguage('php-template', require('highlight.js/lib/languages/php-template'))\r\nhljs.registerLanguage('powershell', require('highlight.js/lib/languages/powershell'))\r\nhljs.registerLanguage('python', require('highlight.js/lib/languages/python'))\r\nhljs.registerLanguage('scss', require('highlight.js/lib/languages/scss'))\r\nhljs.registerLanguage('shell', require('highlight.js/lib/languages/shell'))\r\nhljs.registerLanguage('sql_more', require('highlight.js/lib/languages/sql_more'))\r\nhljs.registerLanguage('sql', require('highlight.js/lib/languages/sql'))\r\n// hljs.registerLanguage('yaml', require('highlight.js/lib/languages/yaml'))\r\nhljs.registerLanguage('typescript', require('highlight.js/lib/languages/typescript'))\r\n\r\nhljs.registerLanguage('vue', vue)\r\n\r\nexport default hljs\r\n","interface Params {\r\n  contentWidth: string;\r\n  headerTitleColor: string;\r\n  codeBg: string;\r\n}\r\n\r\nexport default function ({ contentWidth, headerTitleColor, codeBg }: Params) {\r\n  return `\r\n    .pre-detail {\r\n      .go-back {\r\n        display: inline-block;\r\n        padding: 0 10px 0 0;\r\n        line-height: 20px;\r\n        color: #8FCCFB;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .content {\r\n      overflow: hidden;\r\n\r\n      a {\r\n        color: #4183C4;\r\n      }\r\n\r\n      h1,\r\n      h2,\r\n      h3,\r\n      h4,\r\n      h5,\r\n      h6 {\r\n        position: relative;\r\n        margin-top: 1rem;\r\n        margin-bottom: 1rem;\r\n        font-weight: bold;\r\n        line-height: 1.4;\r\n        color: ${headerTitleColor};\r\n        cursor: text;\r\n      }\r\n\r\n      h1:hover a.anchor,\r\n      h2:hover a.anchor,\r\n      h3:hover a.anchor,\r\n      h4:hover a.anchor,\r\n      h5:hover a.anchor,\r\n      h6:hover a.anchor {\r\n        text-decoration: none;\r\n      }\r\n\r\n      h1 tt,\r\n      h1 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h2 tt,\r\n      h2 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h3 tt,\r\n      h3 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h4 tt,\r\n      h4 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h5 tt,\r\n      h5 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h6 tt,\r\n      h6 code {\r\n        font-size: inherit;\r\n      }\r\n\r\n      h1 {\r\n        padding-bottom: .3em;\r\n        font-size: 2.25em;\r\n        line-height: 1.2;\r\n        border-bottom: 1px solid #dedede;\r\n      }\r\n\r\n      h2 {\r\n        margin-top: 1.2em;\r\n        padding-bottom: .3em;\r\n        font-size: 1.75em;\r\n        line-height: 1.225;\r\n        border-bottom: 1px solid #dedede;\r\n      }\r\n\r\n      h3 {\r\n        font-size: 1.5em;\r\n        line-height: 1.43;\r\n      }\r\n\r\n      h4 {\r\n        font-size: 1.25em;\r\n      }\r\n\r\n      h5 {\r\n        font-size: 1em;\r\n      }\r\n\r\n      h6 {\r\n        font-size: 1em;\r\n        color: #777;\r\n      }\r\n\r\n      blockquote,\r\n      ul,\r\n      ol,\r\n      dl,\r\n      table {\r\n        margin: 0.8em 0;\r\n      }\r\n\r\n      li>ol,\r\n      li>ul {\r\n        margin: 0 0;\r\n      }\r\n\r\n      hr {\r\n        height: 4px;\r\n        padding: 0;\r\n        margin: 16px 0;\r\n        background-color: #e7e7e7;\r\n        border: 0 none;\r\n        overflow: hidden;\r\n        box-sizing: content-box;\r\n        border-bottom: 1px solid #ddd;\r\n      }\r\n\r\n      body>h2:first-of-type {\r\n        margin-top: 0;\r\n        padding-top: 0;\r\n      }\r\n\r\n      body>h1:first-of-type {\r\n        margin-top: 0;\r\n        padding-top: 0;\r\n      }\r\n\r\n      body>h1:first-of-type+h2 {\r\n        margin-top: 0;\r\n        padding-top: 0;\r\n      }\r\n\r\n      body>h3:first-of-type,\r\n      body>h4:first-of-type,\r\n      body>h5:first-of-type,\r\n      body>h6:first-of-type {\r\n        margin-top: 0;\r\n        padding-top: 0;\r\n      }\r\n\r\n      a:first-of-type h1,\r\n      a:first-of-type h2,\r\n      a:first-of-type h3,\r\n      a:first-of-type h4,\r\n      a:first-of-type h5,\r\n      a:first-of-type h6 {\r\n        margin-top: 0;\r\n        padding-top: 0;\r\n      }\r\n\r\n      h1 p,\r\n      h2 p,\r\n      h3 p,\r\n      h4 p,\r\n      h5 p,\r\n      h6 p {\r\n        margin-top: 0;\r\n      }\r\n\r\n      li p.first {\r\n        display: inline-block;\r\n      }\r\n\r\n      ul,\r\n      ol {\r\n        padding-left: 30px;\r\n      }\r\n\r\n      ul:first-of-type,\r\n      ol:first-of-type {\r\n        margin-top: 0;\r\n      }\r\n\r\n      ul:last-child,\r\n      ol:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n\r\n      blockquote {\r\n        border-left: 4px solid #dddddd;\r\n        padding: 0 15px;\r\n        color: #777777;\r\n      }\r\n\r\n      blockquote blockquote {\r\n        padding-right: 0;\r\n      }\r\n\r\n      table {\r\n        padding: 0;\r\n        word-break: initial;\r\n      }\r\n\r\n      table tr {\r\n        border-top: 1px solid #cccccc;\r\n        margin: 0;\r\n        padding: 0;\r\n      }\r\n\r\n      table tr:nth-of-type(2n) {\r\n        background-color: #f8f8f8;\r\n      }\r\n\r\n      table tr th {\r\n        font-weight: bold;\r\n        border: 1px solid #cccccc;\r\n        text-align: left;\r\n        margin: 0;\r\n        padding: 6px 13px;\r\n      }\r\n\r\n      table tr td {\r\n        border: 1px solid #cccccc;\r\n        text-align: left;\r\n        margin: 0;\r\n        padding: 6px 13px;\r\n      }\r\n\r\n      table tr th:first-of-type,\r\n      table tr td:first-of-type {\r\n        margin-top: 0;\r\n      }\r\n\r\n      table tr th:last-child,\r\n      table tr td:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n\r\n      pre>code {\r\n        padding: 1em !important;\r\n        line-height: 1.6rem;\r\n        font-family: Consolas;\r\n        border-radius: 5px;\r\n      }\r\n\r\n      p {\r\n        margin: 0.9rem 0 0;\r\n        padding: 0 0 0.9rem;\r\n        line-height: 1.8rem;\r\n        letter-spacing: 0.1ch;\r\n\r\n        code {\r\n          position: relative;\r\n          top: -2px;\r\n          display: inline-block;\r\n          margin: 0 6px;\r\n          padding: 5px 10px;\r\n          line-height: 1rem;\r\n          font-family: Consolas;\r\n          color: #5e5e72;\r\n          background-color: ${codeBg};\r\n          border-radius: 5px;\r\n        }\r\n\r\n        a {\r\n          color: #41daa7;\r\n        }\r\n      }\r\n    }`\r\n}","/** @jsx jsx */\r\nimport { css, jsx } from '@emotion/react'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { StoreState } from '@Types/storeState'\r\nimport { ArticleObj } from '@Types/article'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { ArticlesManage } from '@Tools/articlesManage'\r\nimport { connect } from 'react-redux'\r\nimport { setCurrentArticleAction, setHeaderTypeAction } from '@Store/actions'\r\nimport { Dispatch } from 'redux'\r\nimport { CurrentArticleInfo } from '@Types/article'\r\nimport Content from '@Components/content'\r\nimport useContentWidth from '@Hooks/useContentWidth'\r\nimport hljs from '@Lib/highlight'\r\nimport getCss from './post-detail-css'\r\nimport 'highlight.js/styles/atom-one-dark.css'\r\n\r\ninterface IProps extends RouteComponentProps {\r\n  store: StoreState\r\n  setCurrentArticle: (currentArticle: CurrentArticleInfo) => any,\r\n  setHeaderType: (headerType: string) => any\r\n}\r\n\r\nfunction PostDetail(props: IProps) {\r\n  console.log('PostDetail')\r\n  window.scrollTo({ top: 0, left: 0 })\r\n\r\n  const contentWidth = useContentWidth()\r\n\r\n  const [postDetail, setPostDetail] = useState<ArticleObj>({\r\n    content: {},\r\n    name: '',\r\n    stat: {}\r\n  })\r\n\r\n  function highlightElement() {\r\n    setTimeout(() => {\r\n      document.querySelectorAll('.post-detail > .content pre > code').forEach((block) => {\r\n        hljs.highlightElement(block as HTMLElement)\r\n      })\r\n    })\r\n  }\r\n\r\n  function getPostDetail() {\r\n    const routeParams: any = props.match.params\r\n    const detail = ArticlesManage.getInstance().getArticleById(routeParams.id)\r\n    setPostDetail(detail)\r\n    console.log(detail)\r\n    props.setHeaderType('article-detail')\r\n    props.setCurrentArticle({\r\n      title: detail.content.meta?.title || detail.name,\r\n      meta: {\r\n        time: detail.content.meta?.time || detail.stat?.birthtime?.replace(/T.+$/, ''),\r\n        tags: detail.content.meta?.tags || []\r\n      }\r\n    })\r\n    highlightElement()\r\n  }\r\n\r\n  useEffect(() => {\r\n    getPostDetail()\r\n  }, [])\r\n\r\n  const cssParams = { \r\n    contentWidth, \r\n    headerTitleColor: props.store.theme.postDetail.headerTitle, \r\n    codeBg: props.store.theme.postDetail.codeBg\r\n  }\r\n\r\n  return (\r\n    <Content>\r\n      <div className=\"post-detail\" css={css`${getCss(cssParams)}`}>\r\n        <div className=\"content\" dangerouslySetInnerHTML={{ __html: postDetail.content?.html || '' }}></div>\r\n      </div>\r\n    </Content>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps (state: any) {\r\n  return {\r\n    store: state\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch: Dispatch) {\r\n  return {\r\n    setCurrentArticle: (value: CurrentArticleInfo) => (dispatch(setCurrentArticleAction(value))),\r\n    setHeaderType: (headerType: string) => dispatch(setHeaderTypeAction(headerType))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(PostDetail))","import PostDetail from './post-detail'\r\n\r\nexport default PostDetail","import { ArticleObj, TagsMap } from \"@Types/article\"\r\n\r\ninterface ArticleMap {\r\n  [id: string]: ArticleObj\r\n}\r\n\r\nexport class ArticlesManage {\r\n  static instance: ArticlesManage\r\n  articleMap!: ArticleMap\r\n  static articles_desc: ArticleObj[]\r\n  static tagsMap: TagsMap\r\n\r\n  constructor() {\r\n    this.init()\r\n  }\r\n\r\n  static getInstance() {\r\n    if (!this.instance) {\r\n      this.instance = new ArticlesManage()\r\n    }\r\n    return this.instance\r\n  }\r\n\r\n  init() {\r\n    const _posts = window.localStorage.getItem('_posts') || '{}'\r\n    this.articleMap = JSON.parse(_posts)\r\n  }\r\n\r\n  private deepClone<T>(data: T): T {\r\n    return JSON.parse(JSON.stringify(data || ''))\r\n  }\r\n\r\n  getArticleDate(article: ArticleObj): Date {\r\n    return new Date(article.content.meta.time.replace(/-/g, '/') || article.stat.birthtime)\r\n  }\r\n\r\n  // 按时间倒序排序\r\n  orderByBirthTimeDesc(): ArticleObj[] {\r\n    if (ArticlesManage.articles_desc) {\r\n      return ArticlesManage.articles_desc\r\n    }\r\n    const articles = this.deepClone(this.articleMap)\r\n    const keys = Object.keys(articles).sort((aKey: string, bKey: string) => {\r\n      return this.getArticleDate(articles[bKey]).getTime() - this.getArticleDate(articles[aKey]).getTime()\r\n    })\r\n    const result = keys.map(key => {\r\n      articles[key].id = key\r\n      return articles[key]\r\n    })\r\n    ArticlesManage.articles_desc = result\r\n    return result\r\n  }\r\n\r\n  getArticlesByCategory(category: string): ArticleObj[] {\r\n    const articles = this.orderByBirthTimeDesc()\r\n    return articles.filter((article: ArticleObj) => article.content.meta.tags.includes(category))\r\n  }\r\n\r\n  getArticleById(id: string): ArticleObj {\r\n    return this.deepClone(this.articleMap[id])\r\n  }\r\n\r\n  getAllTags(): TagsMap {\r\n    if (ArticlesManage.tagsMap instanceof Array) {\r\n      return ArticlesManage.tagsMap\r\n    }\r\n    const tagsMap: TagsMap = {}\r\n    const articles = this.deepClone(this.articleMap)\r\n    Object.values<ArticleObj>(articles).forEach((article: ArticleObj) => {\r\n      const articleTags = article.content.meta.tags\r\n      articleTags.length > 0 && articleTags.forEach((tag: string) => {\r\n        tagsMap[tag] ? tagsMap[tag].count++ : tagsMap[tag] = { count: 1 }\r\n      })\r\n    })\r\n    ArticlesManage.tagsMap = tagsMap\r\n    return tagsMap\r\n  }\r\n\r\n  getArticlesByKeyword(keyword: string): ArticleObj[] {\r\n    if (!keyword) {\r\n      return []\r\n    }\r\n    return this.orderByBirthTimeDesc().filter(article => {\r\n      if (new RegExp(keyword).test(article.name || '')) {\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n  }\r\n}\r\n"],"sourceRoot":""}