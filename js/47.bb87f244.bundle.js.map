{"version":3,"sources":["webpack://rgm_blog/./src/components/content/content.tsx","webpack://rgm_blog/./src/components/content/index.tsx","webpack://rgm_blog/./src/components/post-card/post-card.tsx","webpack://rgm_blog/./src/components/post-card/index.tsx","webpack://rgm_blog/./src/pages/HomePage/HomePage.tsx","webpack://rgm_blog/./src/pages/HomePage/index.tsx","webpack://rgm_blog/./src/tools/articlesManage.ts"],"names":["state","store","dispatch","props","contentWidth","useContentWidth","contentBoxStyle","theme","common","text","bg","contentStyle","css","children","routeTo","bind","toDetail","path","this","setHeaderType","detail","id","render","styles","postCard","title","acticleCardTitle","date","tags","tag","home","tagText","tagBg","onClick","content","meta","name","time","stat","birthtime","replace","map","index","key","headerType","PostCard","setCurrentTab","currentTab","useEffect","postListStyle","articlesManage","querys","location","search","substring","split","category","some","query","value","_posts","getArticlesByCategory","orderByBirthTimeDesc","route","history","push","post","Object","assign","init","getInstance","instance","ArticlesManage","window","localStorage","getItem","articleMap","JSON","parse","deepClone","data","stringify","getArticleDate","article","Date","articles_desc","articles","result","keys","sort","aKey","bKey","getTime","filter","includes","getArticleById","getAllTags","tagsMap","Array","values","forEach","articleTags","length","count"],"mappings":"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","file":"js/47.bb87f244.bundle.js","sourcesContent":["/** @jsx jsx */\r\nimport { css, jsx } from '@emotion/react'\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Dispatch } from 'redux'\r\nimport { StoreState } from '@Types/storeState'\r\nimport useContentWidth from '@Hooks/useContentWidth'\r\n\r\ninterface IProps {\r\n  store: StoreState;\r\n  children?: React.ReactChild\r\n}\r\n\r\nfunction Content (props: IProps) {\r\n  const contentWidth = useContentWidth()\r\n\r\n  const contentBoxStyle = css`\r\n    flex: 1;\r\n    color: ${props.store.theme.common.text};\r\n    background-color: ${props.store.theme.common.bg};\r\n  `\r\n\r\n  const contentStyle = css`\r\n    box-sizing: border-box;\r\n    margin: 0 auto;\r\n    padding: 1rem 1.5rem 100px;\r\n    width: ${contentWidth};\r\n    height: 100%;\r\n  }`\r\n\r\n  return (\r\n    <div css={contentBoxStyle}>\r\n      <div css={contentStyle}>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps (state: any) {\r\n  return {\r\n    store: state\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch: Dispatch) {\r\n  return {\r\n    \r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(Content))","import Content from './content'\r\nexport default Content","/** @jsx jsx */\r\nimport { css, jsx } from '@emotion/react'\r\nimport React from 'react'\r\nimport { ArticleObj } from '@Types/article'\r\nimport { Path, LocationDescriptorObject } from 'history'\r\nimport { connect } from 'react-redux'\r\nimport { setHeaderTypeAction } from '@Store/actions'\r\nimport { Dispatch } from 'redux'\r\nimport { StoreState } from '@Types/storeState'\r\n\r\ninterface IProps {\r\n  store: StoreState,\r\n  detail: ArticleObj,\r\n  routeTo: (route: Path | LocationDescriptorObject) => void,\r\n  setHeaderType: (headerType: string) => any\r\n}\r\n\r\ninterface IState {}\r\n\r\nclass PostCard extends React.PureComponent<IProps, IState> {\r\n  constructor(props: IProps) {\r\n    super(props)\r\n    \r\n    this.state = {\r\n      \r\n    }\r\n\r\n    this.routeTo = this.routeTo.bind(this)\r\n    this.toDetail = this.toDetail.bind(this)\r\n  }\r\n\r\n  routeTo (path: Path) {\r\n    this.props.routeTo(path)\r\n  }\r\n\r\n  toDetail () {\r\n    this.props.setHeaderType('article-detail')\r\n    this.routeTo(`/post/${this.props.detail.id}`)\r\n  }\r\n\r\n  render() {\r\n    const styles = {\r\n      postCard: css`\r\n        box-sizing: border-box;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        margin-top: 2rem;\r\n        padding: 10px 20px;\r\n        width: 100%;\r\n        min-height: 120px;\r\n        border-left: 4px solid transparent;\r\n        transition: all .5s;\r\n\r\n        &:first-of-type {\r\n          margin-top: 0.5rem;\r\n        }\r\n      \r\n        &:hover {\r\n          border-color: #dae0e2;\r\n        }\r\n      `,\r\n      title: css`\r\n        display: block;\r\n        padding: 0 0 10px;\r\n        font-size: 1.5rem;\r\n        word-break: break-word;\r\n        cursor: pointer;\r\n        ${this.props.store.theme.acticleCardTitle ? 'color: ' + this.props.store.theme.acticleCardTitle : ''}\r\n      `,\r\n      date: css`\r\n        color: #606266;\r\n      `,\r\n      tags: css`\r\n        padding: 10px 0 0;\r\n      `,\r\n      tag: css`\r\n        display: inline-block;\r\n        margin-right: 10px;\r\n        margin-bottom: 10px;\r\n        padding: 5px 10px;\r\n        color: ${this.props.store.theme.home.tagText};\r\n        background-color: ${this.props.store.theme.home.tagBg};\r\n        border-radius: 5px;\r\n      `\r\n    }\r\n\r\n    return (\r\n      <div css={styles.postCard}>\r\n        <span css={styles.title} \r\n              onClick={this.toDetail}\r\n        >{this.props.detail.content.meta?.title || this.props.detail.name}</span>\r\n        <span css={styles.date}>{this.props.detail.content.meta?.time || this.props.detail.stat.birthtime.replace(/T.+$/, '')}</span>\r\n        <div css={styles.tags}>\r\n          {this.props.detail.content.meta?.tags.map((tag: string, index: number) => (\r\n            <span css={styles.tag} key={index}>{tag}</span>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps (state: any) {\r\n  return {\r\n    store: state\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch: Dispatch) {\r\n  return {\r\n    setHeaderType: (headerType: string) => dispatch(setHeaderTypeAction(headerType))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PostCard)","import PostCard from './post-card'\r\nexport default PostCard","/** @jsx jsx */\r\nimport { css, jsx } from '@emotion/react'\r\nimport React, { useEffect } from 'react'\r\nimport PostCard from '@Components/post-card'\r\nimport { connect } from 'react-redux'\r\nimport { setCurrentTabAction, setHeaderTypeAction } from '@Store/actions'\r\nimport { Dispatch } from 'redux'\r\nimport { StoreState } from '@Types/storeState'\r\nimport { ArticleObj } from '@Types/article'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { Path, LocationDescriptorObject } from 'history'\r\nimport { ArticlesManage } from '@Tools/articlesManage'\r\nimport useContentWidth from '@Hooks/useContentWidth'\r\nimport Content from '@Components/content'\r\n\r\ninterface IProps extends RouteComponentProps {\r\n  store: StoreState;\r\n  setHeaderType: (headerType: string) => any;\r\n  setCurrentTab: (currentTab: string) => any;\r\n}\r\n\r\nconst boxCss = css`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100px;\r\n  height: 100px;\r\n`\r\n\r\nfunction HomePage (props: IProps) {\r\n  useEffect(() => {\r\n    // 更新标题等信息\r\n    if (props.store.headerType !== 'default') {\r\n      props.setHeaderType('default')\r\n    }\r\n\r\n    if (props.store.currentTab !== '') {\r\n      props.setCurrentTab('')\r\n    }\r\n  }, [])\r\n\r\n  const contentWidth = useContentWidth()\r\n\r\n  const postListStyle = css`\r\n    color: ${props.store.theme.home.text};\r\n  }`\r\n\r\n  const articlesManage = ArticlesManage.getInstance()\r\n\r\n  const querys = props.location.search.substring(1).split('&')\r\n  let category = ''\r\n  querys.some(query => {\r\n    const [key, value] = query.split('=')\r\n    if (key === 'category') {\r\n      category = value\r\n      return true\r\n    }\r\n    return false\r\n  })\r\n\r\n  const _posts = category ? articlesManage.getArticlesByCategory(category) : articlesManage.orderByBirthTimeDesc()\r\n\r\n  const colors = [\r\n    '#fcecdf',\r\n    '#f7f5f6',\r\n    '#f3e1fb',\r\n    '#b0c1ef',\r\n    '#ecdac2',\r\n    '#ceb8aa',\r\n    '#ece9da',\r\n    '#bab1dc',\r\n    '#d9cdf5',\r\n    '#d3e6ec',\r\n    '#ecf0fc',\r\n    '#594c3b',\r\n    '#c1f5ff',\r\n    '#fea5bb',\r\n    '#aa8479',\r\n    '#d4b6ab',\r\n    '#b28ba6',\r\n    '#797993',\r\n    '#5fb4dd',\r\n    '#f7ae83',\r\n    '#b3b9c5',\r\n    '#e8e7ec',\r\n    '#e4ecef',\r\n    '#bedae5',\r\n    '#b00515',\r\n    '#bbcfd0',\r\n    '#fd1a38',\r\n    '#e8cce2',\r\n    '#f8d0d8',\r\n    '#fad5c2',\r\n    '#e9cec3',\r\n    '#e7a0a4',\r\n    '#cbc0c8',\r\n    '#FAEBD7',\r\n    '#DAA520',\r\n    '#2F4F4F',\r\n    '#98FB98',\r\n    '#7B68EE',\r\n    '#00CED1',\r\n  ]\r\n\r\n  function routeTo (route: Path | LocationDescriptorObject) {\r\n    if (typeof route === 'string') {\r\n      props.history.push(route)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Content>\r\n      <div css={postListStyle}>\r\n        {/* <div>\r\n        {colors.map(color => {\r\n           return (\r\n             <div css={boxCss} style={{backgroundColor: color}} key={color}>{color}</div>\r\n           )\r\n        })}\r\n        </div> */}\r\n        \r\n        {_posts.map((post: ArticleObj) => (\r\n          <PostCard key={post.id} detail={Object.assign({}, post)} routeTo={routeTo} />\r\n        ))}\r\n      </div>\r\n    </Content>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps (state: any) {\r\n  return {\r\n    store: state\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch: Dispatch) {\r\n  return {\r\n    setHeaderType: (headerType: string) => dispatch(setHeaderTypeAction(headerType)),\r\n    setCurrentTab: (currentTab: string) => dispatch(setCurrentTabAction(currentTab))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(HomePage))","import HomePage from './HomePage'\r\n\r\nexport default HomePage","import { ArticleObj, TagsMap } from \"@Types/article\"\r\n\r\ninterface ArticleMap {\r\n  [id: string]: ArticleObj\r\n}\r\n\r\nexport class ArticlesManage {\r\n  static instance: ArticlesManage\r\n  articleMap!: ArticleMap\r\n  static articles_desc: ArticleObj[]\r\n  static tagsMap: TagsMap\r\n\r\n  constructor() {\r\n    this.init()\r\n  }\r\n\r\n  static getInstance() {\r\n    if (!this.instance) {\r\n      this.instance = new ArticlesManage()\r\n    }\r\n    return this.instance\r\n  }\r\n\r\n  init() {\r\n    const _posts = window.localStorage.getItem('_posts') || '{}'\r\n    this.articleMap = JSON.parse(_posts)\r\n  }\r\n\r\n  private deepClone<T>(data: T): T {\r\n    return JSON.parse(JSON.stringify(data || ''))\r\n  }\r\n\r\n  getArticleDate(article: ArticleObj): Date {\r\n    return new Date(article.content.meta.time.replace(/-/g, '/') || article.stat.birthtime)\r\n  }\r\n\r\n  // 按时间倒序排序\r\n  orderByBirthTimeDesc(): ArticleObj[] {\r\n    if (ArticlesManage.articles_desc) {\r\n      return ArticlesManage.articles_desc\r\n    }\r\n    const articles = this.deepClone(this.articleMap)\r\n    const keys = Object.keys(articles).sort((aKey: string, bKey: string) => {\r\n      return this.getArticleDate(articles[bKey]).getTime() - this.getArticleDate(articles[aKey]).getTime()\r\n    })\r\n    const result = keys.map(key => {\r\n      articles[key].id = key\r\n      return articles[key]\r\n    })\r\n    ArticlesManage.articles_desc = result\r\n    return result\r\n  }\r\n\r\n  getArticlesByCategory(category: string): ArticleObj[] {\r\n    const articles = this.orderByBirthTimeDesc()\r\n    return articles.filter((article: ArticleObj) => article.content.meta.tags.includes(category))\r\n  }\r\n\r\n  getArticleById(id: string): ArticleObj {\r\n    return this.deepClone(this.articleMap[id])\r\n  }\r\n\r\n  getAllTags(): TagsMap {\r\n    if (ArticlesManage.tagsMap instanceof Array) {\r\n      return ArticlesManage.tagsMap\r\n    }\r\n    const tagsMap: TagsMap = {}\r\n    const articles = this.deepClone(this.articleMap)\r\n    Object.values<ArticleObj>(articles).forEach((article: ArticleObj) => {\r\n      const articleTags = article.content.meta.tags\r\n      articleTags.length > 0 && articleTags.forEach((tag: string) => {\r\n        tagsMap[tag] ? tagsMap[tag].count++ : tagsMap[tag] = { count: 1 }\r\n      })\r\n    })\r\n    ArticlesManage.tagsMap = tagsMap\r\n    return tagsMap\r\n  }\r\n}\r\n"],"sourceRoot":""}